(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,a,c,i,l,u,s,d,m,f,v,p,h;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds"),r=function(e){return e<10?e="0"+e:e},a=function(){var e,a,i,l=(e=(new Date("18 marth 2021").getTime()-(new Date).getTime())/1e3,a=Math.floor(e%60),i=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60)%24,minutes:i,seconds:a});l.timeRemaining>0?(t.textContent=r(l.hours),n.textContent=r(l.minutes),o.textContent=r(l.seconds)):l.timeRemaining<0?(t.textContent="00",n.textContent="00",o.textContent="00"):clearInterval(c)};a();var c=setInterval(a,1e3)})(),v=document.querySelector("menu"),p=document.querySelector(".menu"),h=function(){v.classList.toggle("active-menu")},p.addEventListener("click",h),v.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("close-btn")||t.closest(".menu")||t.matches("menu>ul>li>a"))&&h()})),f=document.querySelector(".popup"),document.querySelectorAll(".popup-btn").forEach((function(e){e.addEventListener("click",(function(){if(document.documentElement.clientWidth>768){f.style.display="block",f.style.opacity="0%";var e=0,t=setInterval((function(){e<100?(++e,f.style.opacity=e+"%"):clearInterval(t)}),7)}else f.style.display="block"}))})),f.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?f.style.display="none":(t=t.closest(".popup-content"))||(f.style.display="none")})),s=document.querySelector(".service-header"),d=s.querySelectorAll(".service-header-tab"),m=document.querySelectorAll(".service-tab"),s.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&d.forEach((function(e,n){e===t&&function(e){for(var t=0;t<m.length;t++)e===t?(d[t].classList.add("active"),m[t].classList.remove("d-none")):(d[t].classList.remove("active"),m[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-content"),o=[],r=0;!function(){for(var e=document.querySelector(".portfolio-dots"),n=0;n<t.length;n++){var r=document.createElement("li");r.classList.add("dot"),o.push(r),e.appendChild(r)}}();var a=function(e,t,n){e[t].classList.remove(n)},c=function(e,t,n){e[t].classList.add(n)},i=function(){a(t,r,"portfolio-item-active"),a(o,r,"dot-active"),++r>=t.length&&(r=0),c(t,r,"portfolio-item-active"),c(o,r,"dot-active")},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(i,t)};n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(a(t,r,"portfolio-item-active"),a(o,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&o.forEach((function(e,t){e===n&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),c(t,r,"portfolio-item-active"),c(o,r,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l(1500)}(),(u=document.getElementById("command")).addEventListener("mouseover",(function(e){var t=e.target;t.matches("img")&&(l=t.src,t.src=t.dataset.img,t.dataset.img=l)})),u.addEventListener("mouseout",(function(e){var t=e.target;t.matches("img")&&(l=t.src,t.src=t.dataset.img,t.dataset.img=l)})),o=document.querySelectorAll(".calc-item"),r=document.querySelectorAll('input[name="user_name"]'),a=document.querySelectorAll(".form-email"),c=document.querySelectorAll(".form-phone"),i=document.querySelector(".mess"),o.forEach((function(e,t){e.addEventListener("input",(function(){0!==t&&(e.value=e.value.replace(/[^\d]/g,""))}))})),r.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-я\s]/gi,"").replace(/\s+/g," ")}))})),i.addEventListener("input",(function(){i.value=i.value.replace(/[^-а-я\s0-9.,?!]/gi,"").replace(/-+/g,"-")})),a.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^a-z@\-_.!~*']/gi,"").replace(/-+/g,"-").replace(/^-|-$/g," ")}))})),c.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^+\d-()]/g,"").replace(/-+/g,"-").replace(/^-|-$/g," "),e.value.length>16&&(e.value=e.value.slice(0,15))}))})),document.addEventListener("blur",(function(e){var t=e.target;t.matches(".form-email")&&(t.value=t.value.replace(/^-/g,"").replace(/-$/g,""))}),!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),i=function(){var t,i,l,u,s,d=0,m=1,f=1,v=n.options[n.selectedIndex].value,p=+o.value;a.value>1&&(m+=(a.value-1)/10),r.value&&r.value<5?f*=2:r.value&&r.value<10&&(f*=1.5),v&&p&&(d=e*v*p*m*f),i=(t={duration:1500,timing:function(e){return e},draw:function(e){c.textContent=Math.floor(d*e)}}).timing,l=t.draw,u=t.duration,s=performance.now(),requestAnimationFrame((function e(t){var n=(t-s)/u;n>1&&(n=1);var o=i(n);l(o),n<1&&requestAnimationFrame(e)})),c.textContent=d};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&i()}))}(100),t=document.querySelectorAll("form"),(n=document.createElement("div")).style.cssText="font-size 2rem;",t.forEach((function(t){t.addEventListener("submit",(function(o){var r=o.target;o.preventDefault(),t.appendChild(n),n.style.color="white",n.textContent="Загрузка...";var a,c=(a=r.elements,function(t){if(Array.isArray(t))return e(t)}(a)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(a)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()})),i=new FormData(r),l={};i.forEach((function(e,t){l[t]=e})),""!==c[0].value&&""!==c[1].value&&""!==c[2].value?(function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(l).then((function(e){if(200!==e.status)throw new Error("network failed");n.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((function(){n.textContent="","form3"===r.id&&(document.querySelector(".popup").style.display="none")}),3e3),c.forEach((function(e){e.value=""}))})).catch((function(e){n.textContent="Что-то пошло не так...",console.log(e),setTimeout((function(){n.textContent=""}),5e3)})),t.querySelectorAll("input").forEach((function(e){e.value=""}))):(o.preventDefault(),alert("Введите корректные данные в поля формы"))}))}))})();